"use strict";var taseavCurrDate=new Date,taseavWrapper=jQuery("#taseav-age-verify"),verifier=new EavVerifier;function EavAge(){this.getAge=function(e){var t,a=new Date(e).getTime();if(a){var i=Date.now()-a,r=new Date(i);t=Math.abs(r.getUTCFullYear()-1970)}else t=!1;return t},this.storeAsCookie=function(){var e=this.getSubmittedValue();return eav.isCustomizer?console.log("Since the age confirmation was executed in the WordPress customizer, the cookie was not saved"):document.cookie="eav_age="+e+";"+eav.cookieParameters,e},this.getSubmittedValue=function(){var e,t=jQuery("#taseav-age-verify");return"eav_enter_age"==eav.formType&&(dob=this.parseDob(),e=this.getAge(dob)),"eav_confirm_age"==eav.formType&&(e=t.find('input[selected="selected"]').attr("name")),e},this.parseDob=function(){var e=jQuery("#taseav-age-verify"),t=parseInt(e.find('input[name="month"]').val()),a=parseInt(e.find('input[name="day"]').val());return t<10&&(t="0"+t),a<10&&(a="0"+a),parseInt(e.find('input[name="year"]').val())+"-"+t+"-"+a}}function EavVerification(e){this.age=e,this.failed=function(){var e=this.age.getSubmittedValue();return"eav_enter_age"===eav.formType?(ageToCheck=eav.verification.minAge,e<ageToCheck):"underAge"===e}}function EavVerifier(){this.age=new EavAge,this.verification=new EavVerification(this.age),this.doFailedAction=function(){alert(eav.underageMessage),eav.isCustomizer||history.back()},this.doPassedAction=function(){jQuery("#taseav-age-verify").remove(),jQuery(document.body).toggleClass("taseav-verify-failed taseav-verify-success")},this.doActions=function(){!0===this.verification.failed()?this.doFailedAction():(verifier.age.storeAsCookie(),this.doPassedAction())},this.buildForm=function(e){e||(e=taseavWrapper),e.find("form").submit(function(e){e.preventDefault()}),e.bind("mousewheel",function(){return!1}),"eav_confirm_age"===eav.formType&&e.find("input[type=submit]").click(function(){jQuery("input[type=submit]",jQuery(this).parents("form")).removeAttr("selected"),jQuery(this).attr("selected","true")}),e.submit(function(){verifier.doActions()})},this.getForm=function(){jQuery("body").prepend(eav.template),jQuery(document.body).addClass("taseav-verify-failed"),jQuery(document.body).removeClass("taseav-verify-success");var e=jQuery("#taseav-age-verify");return verifier.buildForm(e),!0}}jQuery(document).ready(function(){if(!/bot|googlebot|crawler|spider|robot|crawling/i.test(navigator.userAgent)){var e=document.cookie.replace(/(?:(?:^|.*;\s*)eav_age\s*\=\s*([^;]*).*$)|^.*$/,"$1");((e=""===e?"underAge":e)<eav.verification.minAge||"underAge"===e)&&"1"!==eav.debugModeEnabled&&verifier.getForm(),"1"===eav.debugModeEnabled&&console.log("Easy Age Verifier Debug Mode Is Enabled.")}});